document.addEventListener("DOMContentLoaded", function () {
  if (typeof L !== 'undefined') {
    const mapEl = document.getElementById('map');
    if (mapEl) {
      const map = L.map('map').setView([25.78848, -100.16110], 13);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap' }).addTo(map);

      L.marker([25.80045, -100.13580]).addTo(map).bindPopup('Universidad').openPopup();
      L.marker([25.782070, -100.188452]).addTo(map).bindPopup('Apodaca').openPopup();

      const busIcon = L.icon({
        iconUrl: 'imagenes/bus.png',
        iconSize: [40, 40],
        iconAnchor: [20, 20]
      });

      const rutaBus = [
        [25.78197, -100.18837],
  [25.78148, -100.18808],
  [25.78121, -100.18791],
  [25.78071, -100.1876],
  [25.77993, -100.18711],
  [25.77962, -100.18692],
  [25.77939, -100.18677],
  [25.77915, -100.18662],
  [25.77838, -100.18614],
  [25.778, -100.1859],
  [25.77786, -100.18581],
  [25.77773, -100.18573],
  [25.77761, -100.18565],
  [25.77715, -100.18539],
  [25.77707, -100.18534],
  [25.77707, -100.18534],
  [25.77702, -100.18546],
  [25.77694, -100.18565],
  [25.77694, -100.18565],
  [25.77685, -100.18571],
  [25.77679, -100.18578],
  [25.77673, -100.18586],
  [25.77669, -100.18589],
  [25.77665, -100.18591],
  [25.77662, -100.18592],
  [25.77659, -100.18593],
  [25.77655, -100.18593],
  [25.7765, -100.18591],
  [25.77646, -100.1859],
  [25.77638, -100.18586],
  [25.77634, -100.18582],
  [25.7763, -100.18578],
  [25.77628, -100.18575],
  [25.77626, -100.18571],
  [25.77626, -100.18568],
  [25.77627, -100.18564],
  [25.7763, -100.18551],
  [25.7763, -100.18551],
  [25.77633, -100.18548],
  [25.77639, -100.18542],
  [25.77655, -100.18527],
  [25.77658, -100.18524],
  [25.77662, -100.18519],
  [25.77665, -100.18515],
  [25.77674, -100.18502],
  [25.77687, -100.18479],
  [25.77696, -100.18462],
  [25.77702, -100.18449],
  [25.77712, -100.18424],
  [25.77718, -100.1841],
  [25.77722, -100.18403],
  [25.77725, -100.18399],
  [25.77728, -100.18394],
  [25.77734, -100.18389],
  [25.77734, -100.18389],
  [25.77737, -100.18376],
  [25.77742, -100.1836],
  [25.77759, -100.18294],
  [25.77766, -100.18265],
  [25.77782, -100.18201],
  [25.77825, -100.1806],
  [25.7784, -100.18012],
  [25.77854, -100.17971],
  [25.77889, -100.17868],
  [25.77899, -100.17839],
  [25.77971, -100.17623],
  [25.78093, -100.17225],
  [25.78111, -100.17163],
  [25.7812, -100.17129],
  [25.78174, -100.16952],
  [25.78187, -100.1691],
  [25.78195, -100.16883],
  [25.78218, -100.16804],
  [25.78269, -100.1663],
  [25.78324, -100.16449],
  [25.78373, -100.16294],
  [25.78385, -100.16254],
  [25.78401, -100.16198],
  [25.78402, -100.16197],
  [25.78406, -100.16185],
  [25.78414, -100.16157],
  [25.78431, -100.16098],
  [25.78469, -100.15976],
  [25.78513, -100.1583],
  [25.7853, -100.15776],
  [25.78546, -100.15723],
  [25.78576, -100.15627],
  [25.7859, -100.15585],
  [25.78629, -100.15462],
  [25.78668, -100.15336],
  [25.78703, -100.15226],
  [25.78754, -100.15054],
  [25.78786, -100.14948],
  [25.78805, -100.14884],
  [25.78828, -100.14811],
  [25.78837, -100.14782],
  [25.78857, -100.14716],
  [25.78919, -100.14514],
  [25.78922, -100.14504],
  [25.78935, -100.14459],
  [25.78982, -100.14296],
  [25.78986, -100.14283],
  [25.7903, -100.14136],
  [25.79078, -100.13988],
  [25.79081, -100.1398],
  [25.79122, -100.13845],
  [25.79251, -100.13415],
  [25.79251, -100.13415],
  [25.79254, -100.1339],
  [25.79256, -100.13377],
  [25.7926, -100.13358],
  [25.79285, -100.13272],
  [25.79303, -100.13214],
  [25.79358, -100.13035],
  [25.79358, -100.13035],
  [25.79363, -100.13029],
  [25.79365, -100.13027],
  [25.79368, -100.13025],
  [25.79372, -100.13025],
  [25.79376, -100.13026],
  [25.7938, -100.13029],
  [25.79382, -100.13032],
  [25.79382, -100.13036],
  [25.79384, -100.13047],
  [25.7933, -100.13216],
  [25.79321, -100.13244],
  [25.79309, -100.13282],
  [25.79309, -100.13282],
  [25.79301, -100.13306],
  [25.79292, -100.13334],
  [25.79283, -100.13365],
  [25.79276, -100.13386],
  [25.7927, -100.13401],
  [25.79259, -100.13417],
  [25.79259, -100.13417],
  [25.79236, -100.13496],
  [25.79196, -100.13625],
  [25.79196, -100.13625],
  [25.79203, -100.13627],
  [25.79224, -100.13633],
  [25.79283, -100.13647],
  [25.7992, -100.138],
  [25.79927, -100.138],
  [25.79931, -100.138],
  [25.79934, -100.13797],
  [25.79993, -100.13651],
  [25.80015, -100.13599],
  [25.80018, -100.13588],
  [25.80019, -100.13581],
  [25.80019, -100.13526],
  [25.80019, -100.13506],
  [25.80019, -100.13506]
      ];

      let busMarker = L.marker(rutaBus[0], { icon: busIcon }).addTo(map);

      let paso = 0;
      function moverBus() {
        paso++;
        if (paso >= rutaBus.length) paso = 0;
        busMarker.setLatLng(rutaBus[paso]);
      }
      setInterval(moverBus, 1500);
    }
  }

  const facebookBtn = document.getElementById("facebookBtn");
  const whatsappBtn = document.getElementById("whatsappBtn");
  const instagramBtn = document.getElementById("instagramBtn");
  const notificacionBtn = document.getElementById("notificacionBtn");

  if (facebookBtn) facebookBtn.addEventListener("click", () => window.open("https://www.facebook.com/", "_blank"));
  if (instagramBtn) instagramBtn.addEventListener("click", () => window.open("https://www.instagram.com/", "_blank"));
  if (whatsappBtn) whatsappBtn.addEventListener("click", () => window.open("https://wa.me/911", "_blank"));
  if (notificacionBtn) notificacionBtn.addEventListener("click", () => alert("No tienes notificaciones nuevas"));
  if (avisosBtn) avisosBtn.addEventListener("click", () => alert("No hay avisos"));
});